//querys all states of the arduino nodes on startup
rule QUERY_STATES_ON_START
when
    System started or
	cron Time cron "0 0/1 * * * ?"
then
    logInfo("QUERY_STATES_ON_START", "Querying all arduino nodes.")
    arduino_nodes.members.forEach [ item |
        logInfo("QUERY_STATES_ON_START", "Querying node " + item.name + "...")
        sendCommand(RS485_Gateway_out, "!post_all!" + item.name +"!0$\n")
        Thread::sleep(5000)
    ]
end



// handle the online / offline state (also on arduino nodes)
// keep arduino_node members alive by info posting_all messages
// arduino nodes will expire by expire binding after 3 mininutes
// periodically let arduinos post all (this is done above)
// in arduino: just keep online state (this is silent state) alive by incoming from openhab (post all)


			





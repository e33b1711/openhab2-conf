import org.eclipse.smarthome.model.script.ScriptServiceUtil

rule PowerGatewayInRule
when 
	Item powerGateway changed 
then
	//variables	
	var String name_string = ""
	var String value_string = ""
	var float value=0

	name_string  = transform("REGEX", "[ ]*([A-Za-z]*):[ ]*[0-9]*[ ]*", powerGateway.state.toString)
	value_string = transform("REGEX", "[ ]*[A-Za-z]*:[ ]*([0-9]*)[ ]*", powerGateway.state.toString)
	logInfo("PowerGatewayInRule", "name / value strings:" + name_string + " " + value_string)
	if (name_String!=null and value_String!== null){
		value=Float::parseFloat(value_string)
		if (name_String="powerHeating"){
			powerHeating.postUpdate(value);
		}
   	}
end
